{% extends 'base.html' %}
{% load static %}
{% block content %}

<div class="discussion-page" style="padding: 20px;">
    <!-- Header Diskusi -->
    <div class="discussion-header" style="margin-bottom: 20px;">
        <h1>{{ discussion.title }}</h1>
        <p style="color: #6E6E6E;">Dibuat oleh {{ discussion.user.username }} pada {{ discussion.date_created|date:"d-m-Y H:i" }}</p>
    </div>

    <!-- Konten Diskusi -->
    <div class="discussion-content" style="margin-bottom: 40px;">
        <p>{{ discussion.content }}</p>
    </div>

    <!-- Tombol Edit -->
    <tr>
        <td>
            <a href="{% url 'discuss_forum:edit_forum' discussion.id %}">
                <button>
                    Edit
                </button>
            </a>
        </td>
        <td>
            <a href="{% url 'discuss_forum:delete_forum' discussion.id %}">
                <button>
                    Delete
                </button>
            </a>
        </td>
    </tr>

    <!-- Formulir Komentar (Opsional) -->
    {% if user.is_authenticated %}
        <div class="add-comment" style="margin-bottom: 40px;">
            <h2>Tambah Komentar</h2>
            <form method="POST" action="{% url 'discuss_forum:add_comment' discussion.id %}">
                {% csrf_token %}
                <textarea name="content" rows="4" style="width: 100%;" required></textarea>
                <button type="submit" style="background-color: #FF9900; color: #FFFFFF; padding: 10px 20px; border: none; border-radius: 5px; cursor: pointer;">Kirim</button>
            </form>
        </div>
    {% else %}
        <p><a href="{% url 'login' %}">Login</a> untuk menambahkan komentar.</p>
    {% endif %}

    <!-- Daftar Komentar -->
    <div class="comments-section">
        <h2>Komentar</h2>
        {% for comment in comments %}
            <div class="comment" style="border-bottom: 1px solid #ccc; padding: 10px 0;">
                <p>{{ comment.content }}</p>
                <p style="color: #6E6E6E; font-size: 0.9rem;">Dikirim oleh {{ comment.user.username }} pada {{ comment.date_created|date:"d-m-Y H:i" }}</p>
            </div>
        {% empty %}
            <p>Belum ada komentar. Jadilah yang pertama untuk berkomentar!</p>
        {% endfor %}
    </div>
</div>

{% endblock content %}
